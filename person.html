---
layout: layout.html
---

<div id="person">
</div>

<div id="photos">
</div>

<script type="text/template" id="person-template">
  <h1>{{username}}</h1>
  <p>joined {{ joined }}</p>
  {{#follows}}
  <div>
    Follows
    <ul class="follows">
      {{#follows}}
        <li><a href="/people/{{.}}">{{.}}</a></li>
      {{/follows}}
    </ul>
  </div>
  {{/follows}}
</script>

<script type="text/template" id="photos-template">
  {{#photos}}
  <img src="/data/images/{{username}}/{{image}}" style="width: 200px; height: 200px;"/>
  {{/photos}}
</script>

<script>

  var showPerson = function(username) {
    var template = Hogan.compile(document.getElementById('person-template').innerText)
    var photosTemplate = Hogan.compile(document.getElementById('photos-template').innerText)

    Data.user(username, {follows: true, photos: true})
      .then(function(person) {
        person.joined = fecha.format(person.joined, 'mediumDate')
        document.getElementById('person').innerHTML = template.render(person)
        document.getElementById('photos').innerHTML = photosTemplate.render(person)
      })
  }

  showPerson(window.location.pathname.split('/').pop())

</script>
